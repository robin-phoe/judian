import{a as y}from"./axios.451cdb92.js";import{l as O}from"./qs.cb2714fe.js";const d=y.create({baseURL:"/api",timeout:6e4}),o=[],n=t=>{for(const e in o){const s=+e,r=o[e];r.url===t.url&&r.method===t.method&&JSON.stringify(r.params)===JSON.stringify(t.params)&&JSON.stringify(r.data)===JSON.stringify(t.data)&&(r.cancel("\u64CD\u4F5C\u592A\u9891\u7E41\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"),o.splice(s,1))}};function _(){return localStorage.getItem("YYDANHONGTOKEN")}d.interceptors.request.use(t=>{var e,s,r,p,m,l,u,h;return t.method==="get"&&!((e=t==null?void 0:t.params)!=null&&e.noToken)&&(t.headers.get.Authorization=_()),t.method==="post"&&!((s=t==null?void 0:t.data)!=null&&s.noToken)&&(t.headers.post.Authorization=_()),t.method==="get"&&((r=t==null?void 0:t.params)==null?void 0:r.noToken)&&delete t.params.noToken,t.method==="post"&&((p=t==null?void 0:t.data)==null?void 0:p.noToken)&&delete t.data.noToken,t.method==="post"&&(((m=t==null?void 0:t.data)==null?void 0:m.formData)===!0?(delete t.data.formData,t.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",t.data=O.stringify(t.data)):((l=t==null?void 0:t.data)==null?void 0:l.isFile)===!0&&(t.headers.post["Content-Type"]="multipart/form-data;",delete t.data.isFile)),((u=t==null?void 0:t.data)==null?void 0:u.abortFlag)&&delete t.data.abortFlag&&n(t),((h=t==null?void 0:t.params)==null?void 0:h.abortFlag)&&delete t.params.abortFlag&&n(t),t},t=>Promise.reject(t));d.interceptors.response.use(t=>{const e=t.data;return e.code==401&&localStorage.clear(),e},t=>(t.toString().indexOf("timeout")>-1&&console.log("\u8BF7\u6C42\u8D85\u65F6\uFF1A",o[o.length-1].url),Promise.resolve(t)));const a={get(t,e,s){return d({method:"get",url:`${t}`,params:e,headers:s})},post(t,e){return d({method:"post",url:`${t}`,data:e})}},k=()=>a.get("/get_room_info"),I=t=>a.post("/set_room_info",t),b=()=>a.get("/get_commodity_info"),i=t=>a.post("/set_commodity_info",t),F=()=>a.get("/get_history_order_info"),N=t=>a.post("/del_history_order_info",t),S=t=>a.post("/set_order_info",t),x=t=>a.post("/pause_order",t),C=t=>a.post("/open_end_order",t);export{i as a,S as b,k as c,F as d,N as e,b as g,C as o,x as p,I as s};
