import{f as T,n as N,o as I,q as O,r as z,s as M,g as D,e as h}from"./element-plus.32df0a3b.js";import{a as m,l as o,m as s,p as i,U as g,V as p,T as F,P as b,Q as a,W as e,F as k,a5 as w,_ as H}from"./@vue.a82e9935.js";import{e as L,f as P}from"./api.ebb9604f.js";import{_ as U}from"./index.1b638969.js";import"./lodash-es.39464d94.js";import"./@vueuse.370d0333.js";import"./@popperjs.fd04dfd6.js";import"./@ctrl.5f67d428.js";import"./dayjs.38009a6e.js";import"./axios.451cdb92.js";import"./async-validator.73a10b83.js";import"./memoize-one.c87f6fc8.js";import"./escape-html.86960cf8.js";import"./normalize-wheel-es.e2b4fa49.js";import"./@floating-ui.cac404ee.js";import"./qs.cb2714fe.js";import"./side-channel.0f31c79c.js";import"./get-intrinsic.0f3ed0a2.js";import"./has-symbols.6b764405.js";import"./function-bind.c99feded.js";import"./has.38a7880d.js";import"./call-bind.00b5229b.js";import"./object-inspect.d900f9c3.js";import"./vue-router.4f0e1aa5.js";import"./pinia.b147f849.js";import"./vue-demi.6e7a88e9.js";import"./default-passive-events.a10ec130.js";const $={class:"history-container"},q={style:{"font-size":"20px","font-weight":"400"}},Q={class:"title-wrap"},S={class:"handle-box"},W={key:0,class:"order-box"},j={class:"g-item"},A={key:1},G={key:1,class:"no-data"},J={__name:"index",setup(K){const v=m(""),c=m([]),u=m("");async function y(){const l=await L();l.code===200&&(c.value=l.data,v.value=c.value.reduce((t,_)=>t+_.subtotal,0),u.value=c.value[0].time)}y();async function x(l){console.log(l);try{D.confirm("\u786E\u8BA4\u5220\u9664?","\u6CE8\u610F",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{const t=await P({id:l});t.code==200?(h.success("\u5220\u9664\u6210\u529F"),y()):h.error(t.msg)}).catch(()=>{})}catch(t){h.error(t)}}return m(!1),(l,t)=>{const _=T,n=N,E=I,C=O,B=z,V=M;return o(),s("div",$,[i("h2",null,[g("\u5386\u53F2\u8BA2\u5355 \xA0 "),i("span",q,"(\u603B\u8BA1\uFF1A"+p(v.value)+"\u5143)",1)]),F(" <h4></h4> "),c.value.length?(o(),b(B,{key:0,modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=r=>u.value=r),accordion:""},{default:a(()=>[(o(!0),s(k,null,w(c.value,r=>(o(),b(C,{name:r.time},{title:a(()=>[i("div",Q,[i("span",null,p(r.date),1),i("div",S,[i("span",null,"\u5C0F\u8BB0\uFF1A "+p(r.subtotal)+" \u5143",1),e(_,{type:"danger",size:"small",onClick:H(d=>x(r.id),["stop"])},{default:a(()=>[g("\u5220\u9664")]),_:2},1032,["onClick"])])])]),default:a(()=>[e(E,{border:"",data:r.orders,style:{width:"100%"}},{default:a(()=>[e(n,{align:"center",prop:"room_name",label:"\u623F\u95F4\u540D",width:"150"}),e(n,{align:"center",prop:"start_time",label:"\u5F00\u59CB\u65F6\u95F4"}),e(n,{align:"center",prop:"end_time",label:"\u7ED3\u675F\u65F6\u95F4"}),e(n,{align:"center",prop:"total_time",label:"\u603B\u65F6\u957F"}),e(n,{align:"center",prop:"order",label:"\u8BA2\u5355","min-width":"200"},{default:a(({row:d})=>[d.order_info.length?(o(),s("div",W,[(o(!0),s(k,null,w(d.order_info,f=>(o(),s("span",j,p(f.order_content)+" x "+p(f.count),1))),256))])):(o(),s("div",A,"--"))]),_:1}),e(n,{align:"center",prop:"cost",label:"\u603B\u8D39\u7528"}),e(n,{align:"center",fixed:"right",width:"140"},{default:a(({row:d})=>[e(_,{type:"danger",size:"small",onClick:f=>x(d.order_id)},{default:a(()=>[g("\u5220\u9664\u8BE5\u6761\u6570\u636E")]),_:2},1032,["onClick"])]),_:1})]),_:2},1032,["data"])]),_:2},1032,["name"]))),256))]),_:1},8,["modelValue"])):(o(),s("div",G,[e(V,{description:"\u6682\u65E0\u6570\u636E"})]))])}}},we=U(J,[["__scopeId","data-v-7da18222"]]);export{we as default};
