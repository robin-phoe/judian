import{e as E,j as F,k as I,l as V,m as B,c as D}from"./element-plus.2f5265de.js";import{a as z}from"./axios.451cdb92.js";import{l as J}from"./qs.cb2714fe.js";import{_ as P}from"./index.3c4d7547.js";import{a as b,l as y,m as T,W as a,Q as d,F as U,a5 as $,aw as j,ax as A,p as n,P as H,V as v,U as x,T as L}from"./@vue.a82e9935.js";import"./lodash-es.39464d94.js";import"./@vueuse.370d0333.js";import"./@popperjs.fd04dfd6.js";import"./@ctrl.5f67d428.js";import"./dayjs.38009a6e.js";import"./async-validator.73a10b83.js";import"./memoize-one.c87f6fc8.js";import"./escape-html.86960cf8.js";import"./normalize-wheel-es.e2b4fa49.js";import"./@floating-ui.cac404ee.js";import"./side-channel.0f31c79c.js";import"./get-intrinsic.0f3ed0a2.js";import"./has-symbols.6b764405.js";import"./function-bind.c99feded.js";import"./has.38a7880d.js";import"./call-bind.00b5229b.js";import"./object-inspect.d900f9c3.js";import"./vue-router.4f0e1aa5.js";import"./pinia.b147f849.js";import"./vue-demi.6e7a88e9.js";import"./default-passive-events.a10ec130.js";const Y="http://orderapi.ximgs.net",h=z.create({baseURL:Y,timeout:6e4}),_=[],w=e=>{for(const t in _){const s=+t,o=_[t];o.url===e.url&&o.method===e.method&&JSON.stringify(o.params)===JSON.stringify(e.params)&&JSON.stringify(o.data)===JSON.stringify(e.data)&&(o.cancel("\u64CD\u4F5C\u592A\u9891\u7E41\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"),_.splice(s,1))}};function k(){return localStorage.getItem("YYDANHONGTOKEN")}h.interceptors.request.use(e=>{var t,s,o,u,p,l,i,r;return e.method==="get"&&!((t=e==null?void 0:e.params)!=null&&t.noToken)&&(e.headers.get.Authorization=k()),e.method==="post"&&!((s=e==null?void 0:e.data)!=null&&s.noToken)&&(e.headers.post.Authorization=k()),e.method==="get"&&((o=e==null?void 0:e.params)==null?void 0:o.noToken)&&delete e.params.noToken,e.method==="post"&&((u=e==null?void 0:e.data)==null?void 0:u.noToken)&&delete e.data.noToken,e.method==="post"&&(((p=e==null?void 0:e.data)==null?void 0:p.formData)===!0?(delete e.data.formData,e.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",e.data=J.stringify(e.data)):((l=e==null?void 0:e.data)==null?void 0:l.isFile)===!0&&(e.headers.post["Content-Type"]="multipart/form-data;",delete e.data.isFile)),((i=e==null?void 0:e.data)==null?void 0:i.abortFlag)&&delete e.data.abortFlag&&w(e),((r=e==null?void 0:e.params)==null?void 0:r.abortFlag)&&delete e.params.abortFlag&&w(e),e},e=>Promise.reject(e));h.interceptors.response.use(e=>{const t=e.data;return t.code==401&&localStorage.clear(),t},e=>(e.toString().indexOf("timeout")>-1&&console.log("\u8BF7\u6C42\u8D85\u65F6\uFF1A",_[_.length-1].url),Promise.resolve(e)));const N={get(e,t,s){return h({method:"get",url:`${e}`,params:t,headers:s})},post(e,t){return h({method:"post",url:`${e}`,data:t})}},q=()=>N.get("/get_history_order_info"),G=e=>N.post("/del_history_order_info",e);const K=e=>(j("data-v-43b4cece"),e=e(),A(),e),M={class:"history-container"},Q=K(()=>n("h2",null,"\u5386\u53F2\u8BA2\u5355",-1)),R={class:"title-wrap"},W={class:"handle-box"},X={class:"order-box"},Z={__name:"index",setup(e){const t=b([{id:"001",date:"2023-03-01",subtotal:"600",orders:[{order_id:"2016-05-03",room_name:"Tom",price:"104",start_time:"2021-02-22 12:22:32",end_time:"2021-02-22 12:22:32",total_time:"2021-02-22 12:22:32",overtime:"2021-02-22 12:22:32",isStop:!0,isEnd:!1,order_info:"\u9999\u70DF"}]}]),s=b(t.value[0].time);async function o(){const p=await q();console.log(p)}o();async function u(p){try{const l=await G({id:p})}catch(l){D.error(l)}}return b(!1),(p,l)=>{const i=E,r=F,S=I,O=V,C=B;return y(),T("div",M,[Q,a(C,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=m=>s.value=m),accordion:""},{default:d(()=>[(y(!0),T(U,null,$(t.value,m=>(y(),H(O,{name:m.time},{title:d(()=>[n("div",R,[n("span",null,v(m.date),1),n("div",W,[n("span",null,"\u5C0F\u8BB0\uFF1A "+v(m.subtotal)+" \u5143",1),a(i,{type:"danger",size:"small"},{default:d(()=>[x("\u5220\u9664")]),_:1})])])]),default:d(()=>[a(S,{border:"",data:m.orders,style:{width:"100%"}},{default:d(()=>[a(r,{align:"center",prop:"room_name",label:"\u623F\u95F4\u540D",width:"150"}),a(r,{align:"center",prop:"price",label:"\u5355\u4EF7",width:"120"}),a(r,{align:"center",prop:"start_time",label:"\u5F00\u59CB\u65F6\u95F4"}),a(r,{align:"center",prop:"end_time",label:"\u7ED3\u675F\u65F6\u95F4"}),a(r,{align:"center",prop:"total_time",label:"\u603B\u65F6\u957F"}),a(r,{align:"center",prop:"order",label:"\u8BA2\u5355","min-width":"200"},{default:d(({row:c})=>[n("div",X,[L(' {{ row.order.join(",") }} '),x(" "+v(c.order_info),1)])]),_:1}),a(r,{align:"center",prop:"cost",label:"\u603B\u8D39\u7528"}),a(r,{align:"center",fixed:"right",width:"140"},{default:d(({row:c})=>[a(i,{type:"danger",size:"small",onClick:f=>u(c.id)},{default:d(()=>[x("\u5220\u9664\u8BE5\u6761\u6570\u636E")]),_:2},1032,["onClick"])]),_:1})]),_:2},1032,["data"])]),_:2},1032,["name"]))),256))]),_:1},8,["modelValue"])])}}},Oe=P(Z,[["__scopeId","data-v-43b4cece"]]);export{Oe as default};
